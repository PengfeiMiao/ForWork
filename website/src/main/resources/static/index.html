<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>骇客笔记</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
    <script src="./js/jquery.min.js"></script>
    <script src="./layui/layui.js"></script>
    <script src="./js/index.js"></script>
    <script src="./js/axios.min.js"></script>
    <script src="./js/test.js"></script>
    <style>
        html { overflow-x:hidden; }
    </style>
</head>
<body>

<ul class="layui-nav layui-bg-green" lay-filter="test">
    <li class="layui-nav-item layui-this">
        <a href="javascript:;" property="home.html">首页</a>
    </li>
    <li class="layui-nav-item">
        <a href="javascript:;" property="article.html">文章管理</a>
    </li>
    <li class="layui-nav-item"><a href="javascript:;" property="line.html">时间线</a></li>
    <li class="layui-nav-item">
        <a href="javascript:;">关于</a>
        <dl class="layui-nav-child">
            <dd><a property="page1.html">照片墙</a></dd>
            <dd><a property="page2.html">留言区</a></dd>
            <dd><a property="page3.html">相关网站</a></dd>
        </dl>
    </li>
    <li class="layui-nav-item" style="float: right; right: 0;">
        <a href="javascript:;"><img src="./img/team1.png" class="layui-nav-img" alt="">我</a>
        <dl class="layui-nav-child">
            <dd><a>修改信息</a></dd>
            <dd><a>安全管理</a></dd>
            <dd><a>退出</a></dd>
        </dl>
    </li>
</ul>

<iframe id="iframeMain" src="home.html" style="overflow:visible;"
        scrolling="no" height="100%" width="100%" onload="setIframeHeight()"></iframe>
<script>
    //注意：导航 依赖 element 模块，否则无法进行功能性操作
    layui.use('element', function() {
        var element = layui.element;
        element.render('nav','test');
        element.on('nav(test)', function(elem) {
            console.log(elem); //得到当前点击的DOM对象
            $("#iframeMain").attr("src",$(this).attr("property"))
        });
    });

    // $("#iframeMain").load(function() {
    //     var mainHeight = $(this).contents().find("body").height() + 20;
    //     console.log(mainHeight)
    //     $(this).height(mainHeight);
    // });

    //这里代码解决：iframe 被其他页面撑开太高，可以恢复自适应高度
    function setIframeHeight() {
        let iframe = $('#iframeMain');
        iframe.height(iframe.contents().find("body").height() + 20);
        setTimeout(() => {
            let iframe = $('#iframeMain');
            iframe.height(iframe.contents().find("body").height() + 20);
        }, 300);
    }
</script>

</body>
</html>